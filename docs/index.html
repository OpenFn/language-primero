<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Language Primero <a href="https://travis-ci.org/OpenFn/language-primero"><img src="https://travis-ci.org/OpenFn/language-primero.svg?branch=master" alt="Build Status"></a></h1>
<p>Language Pack for building expressions and operations for use with UNICEF's
Primero API.</p>
<h2>Primero API Versions</h2>
<h3>Adaptor for Primero v2.0 coming soon!</h3>
<p><code>v1.0.7</code> of this adaptor was built for the Primero <code>v1.1</code> API. In the future, we
may be able to provide complete <code>v1</code> and <code>v2</code> Primero API compatibility in
<code>language-primero-v1.1</code> but are waiting to see if significant changes are
required related to authentication.</p>
<p><a href="https://docs.google.com/document/d/1jpaT2_UBBnc3PxPYlLMBEzNUkyfuxRZiksywG5MKM0Q/edit">Primero API v1.1 Documentation</a></p>
<h4>Primero Authentication Strategies</h4>
<p>The Primero team is considering a shift to Microsoft Azure Active Directory B2C
for auth. We can likely accommodate this with a similar pattern as has been used
in our Microsoft Dynamics, Github, or Google Sheets adaptors, but we'll need to
await final doucmentation for Primero's <code>v2</code> API before making changes.</p>
<p><a href="https://docs.microsoft.com/en-us/azure/active-directory-b2c/">Azure Active Directory B2C</a></p>
<h2>Technical Documentation</h2>
<h3>Get cases from Primero with query parameters</h3>
<p>Use this function to get cases from Primero based on a set of query parameters.
Note that in many implementations, the <code>remote</code> attribute should be set to
<code>true</code> to ensure that only cases marked for remote access will be retrieved.</p>
<pre class="prettyprint source lang-js"><code>getCases(
  {
    remote: true,
    scope: {
      transitions_created_at: 'dateRange||17-Mar-2008.17-Mar-2008',
      service_response_types: 'list||referral_to_oscar',
    },
  },
  state => {
    console.log('Here is the callback.');
    return state;
  }
);
</code></pre>
<h3>Create a new case in Primero</h3>
<p>Use this function to insert a new case in Primero based on a set of Data.</p>
<pre class="prettyprint source lang-js"><code>createCase(
  {
    data: {
      remote: true,
      oscar_number: c.oscar_number,
      case_id: c.case_id,
      child: {
        date_of_birth: &quot;2020-01-02&quot;,
        ...,
        services_section: [ ... ],
        transitions: [ ... ]
      },
    }
  }
);
</code></pre>
<h3>Update case with query Parameters</h3>
<p>Use this function to update an existing case from Primero. In this
implementation, the function uses and ID to check for the case to update.</p>
<pre class="prettyprint source lang-js"><code>updateCase(
  {
    id: &quot;case_id&quot;,
    data: {
      remote: true,
      oscar_number: c.oscar_number,
      case_id: c.case_id,
      child: {
        date_of_birth: &quot;2020-01-02&quot;,
        ...,
        services_section: [ ... ],
        transitions: [ ... ]
      },
    }
  }
);
</code></pre>
<h3>Update or Insert a case with query Parameters</h3>
<p>Use this function to update an existing case from Primero or to insert it
otherwise. In this implementation, we first check if the case exist before
choosing the right operation to do.</p>
<pre class="prettyprint source lang-js"><code>upsertCase(
  {
    externalIds: [&quot;case_id&quot;],
    data: {
      remote: true,
      oscar_number: c.oscar_number,
      case_id: c.case_id,
      child: {
        date_of_birth: &quot;2020-01-02&quot;,
        ...,
        services_section: [ ... ],
        transitions: [ ... ]
      },
    }
  }
);
</code></pre>
<h2>Development</h2>
<p>Clone the repo, run <code>npm install</code>.</p>
<p>Run tests using <code>npm run test</code> or <code>npm run test:watch</code></p>
<p>Build the project using <code>make</code>.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#cleanupState">cleanupState</a></li><li><a href="global.html#createCase">createCase</a></li><li><a href="global.html#execute">execute</a></li><li><a href="global.html#getCases">getCases</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#post">post</a></li><li><a href="global.html#updateCase">updateCase</a></li><li><a href="global.html#upsertCase">upsertCase</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri Oct 09 2020 13:09:57 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>